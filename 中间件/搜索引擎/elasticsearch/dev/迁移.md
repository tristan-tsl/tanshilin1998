# 使用es内部工具

```
curl _XPOST 'http://192.168.90.252:9200/_reindex' -d{"source": {"remote": {"host": "elastic:wjh1qazXSW@123@es-cn-oew1ylukr001ynb70.elasticsearch.aliyuncs.com:9200"},"index": "ssu","size": 5000},"dest": {"index": "product_ssu"}}
```

但是这种方式严重依赖es集群所在网络, 有使用前提

# 使用外部工具方式

```
# 安装依赖包
npm install elasticdump -g

# 清理旧的索引
# curl -XDELETE http://192.168.90.252:9200/product_ssu
```



# 迁移数据

## ssu

```
elasticdump.cmd --input=http://192.168.90.16:30088/ssu --output=http://192.168.90.21:30088/ssu --type=analyzer
elasticdump.cmd --input=http://192.168.90.16:30088/ssu --output=http://192.168.90.21:30088/ssu --type=mapping
elasticdump.cmd --limit=3000 --input=http://192.168.90.16:30088/ssu --output=http://192.168.90.21:30088/ssu --type=data

```

## spu

```
elasticdump.cmd --input=http://192.168.90.16:30088/spu --output=http://192.168.90.21:30088/spu --type=analyzer
elasticdump.cmd --input=http://192.168.90.16:30088/spu --output=http://192.168.90.21:30088/spu --type=mapping
elasticdump.cmd --limit=3000 --input=http://192.168.90.16:30088/spu --output=http://192.168.90.21:30088/spu --type=data

```

## task

```
elasticdump.cmd --input=http://192.168.90.16:30088/task --output=http://192.168.90.21:30088/task --type=analyzer
elasticdump.cmd --input=http://192.168.90.16:30088/task --output=http://192.168.90.21:30088/task --type=mapping
elasticdump.cmd --limit=3000 --input=http://192.168.90.16:30088/task --output=http://192.168.90.21:30088/task --type=data

```

## log_center

```
elasticdump.cmd --input=http://192.168.90.16:30088/log_center --output=http://192.168.90.21:30088/log_center --type=analyzer
elasticdump.cmd --input=http://192.168.90.16:30088/log_center --output=http://192.168.90.21:30088/log_center --type=mapping
elasticdump.cmd --limit=3000 --input=http://192.168.90.16:30088/log_center --output=http://192.168.90.21:30088/log_center --type=data

```



# 创建索引

## task

```
{
    "settings":{
        "number_of_shards":1,
        "number_of_replicas":2
    },
    "mappings":{
        "properties":{
            "task_id":{
                "type":"long"
            },
            "store_id":{
                "type":"long"
            },
            "task_type":{
                "type":"short"
            },
            "task_status":{
                "type":"short"
            },
            "create_type":{
                "type":"short"
            },
            "spu_id":{
                "type":"long"
            },
            "spu_temperature":{
                "type":"short"
            },
            "spu_meature_mode":{
                "type":"short"
            },
            "spu_expire_days":{
                "type":"integer"
            },
            "class_id":{
                "type":"long"
            },
            "c_t":{
                "type":"long"
            },
            "u_t":{
                "type":"long"
            },
            "skuList":{
                "type":"object"
            }
        }
    }
}
```

## spu

```
{
    "settings":{
        "number_of_shards":1,
        "number_of_replicas":2,
        "analysis":{
            "analyzer":{
                "first_letter_smart_analyze":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "filter":[
                        "first_letter_filter"
                    ]
                },
                "full_pinyin_smart_analyze":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "filter":[
                        "full_pinyin_filter"
                    ]
                },
                "first_letter_keyword_analyze":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "raw_first_letter_filter"
                    ]
                },
                "full_pinyin_keyword_analyze":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "raw_full_pinyin_filter"
                    ]
                }
            },
            "filter":{
                "full_pinyin_filter":{
                    "type":"pinyin",
                    "keep_first_letter":"false",
                    "keep_full_pinyin":"false",
                    "keep_joined_full_pinyin":"true",
                    "keep_none_chinese_in_joined_full_pinyin":"true"
                },
                "first_letter_filter":{
                    "type":"pinyin",
                    "keep_full_pinyin":"false",
                    "keep_separate_first_letter":"true"
                },
                "raw_full_pinyin_filter":{
                    "type":"pinyin",
                    "keep_first_letter":"false",
                    "keep_full_pinyin":"false",
                    "keep_joined_full_pinyin":"true",
                    "keep_none_chinese_in_joined_full_pinyin":"true"
                },
                "raw_first_letter_filter":{
                    "type":"pinyin",
                    "keep_full_pinyin":"false"
                }
            }
        }
    },
    "mappings":{
        "properties":{
            "spu_id":{
                "type":"long"
            },
            "normal_spu":{
                "type":"short"
            },
            "store_id":{
                "type":"long"
            },
            "class1_id":{
                "type":"long"
            },
            "class2_id":{
                "type":"long"
            },
            "status":{
                "type":"short"
            },
            "spu_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "text":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    }
                }
            },
            "spu_spec":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "text":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    }
                }
            },
            "spu_unit":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "text":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    }
                }
            },
            "spu_alias":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "text":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "samart_first_letter":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    }
                }
            }
        }
    }
}
```

## ssu

```
{
    "settings":{
        "number_of_shards":1,
        "number_of_replicas":2,
        "analysis":{
            "tokenizer": {
                "single_letter": {
                  "type": "ngram",
                  "min_gram": 1,
                  "max_gram": 1
                }
              },
            "analyzer":{
                "single_letter_analyze": {
                    "tokenizer": "single_letter"
                  },
                "first_letter_smart_analyze":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "filter":[
                        "first_letter_filter"
                    ]
                },
                "full_pinyin_smart_analyze":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "filter":[
                        "full_pinyin_filter"
                    ]
                },
                "first_letter_keyword_analyze":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "raw_first_letter_filter"
                    ]
                },
                "full_pinyin_keyword_analyze":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "raw_full_pinyin_filter"
                    ]
                }
            },
            "filter":{
                "full_pinyin_filter":{
                    "type":"pinyin",
                    "keep_first_letter":"false",
                    "keep_full_pinyin":"false",
                    "keep_joined_full_pinyin":"true",
                    "keep_none_chinese_in_joined_full_pinyin":"true"
                },
                "first_letter_filter":{
                    "type":"pinyin",
                    "keep_full_pinyin":"false",
                    "keep_separate_first_letter":"true"
                },
                "raw_full_pinyin_filter":{
                    "type":"pinyin",
                    "keep_first_letter":"false",
                    "keep_full_pinyin":"false",
                    "keep_joined_full_pinyin":"true",
                    "keep_none_chinese_in_joined_full_pinyin":"true"
                },
                "raw_first_letter_filter":{
                    "type":"pinyin",
                    "keep_full_pinyin":"false"
                }
            }
        }
    },
    "mappings":{
        "properties":{
            "id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "ssu_no":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "ssu_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "ssu_desc":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "spu_alias":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "ssu_alias":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "ssu_pics":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "ssu_spec":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "ssu_unit":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "ssu_remark":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "class1_id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "class2_id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "class1_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "class2_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "store_id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "store_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "status":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "state":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "c_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "u_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "c_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "u_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_type":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_no":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_name":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "spu_pinyin":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_temperature":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_expire_days":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_unit":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_remark":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "spu_status":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_c_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_u_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_c_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "spu_u_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_id":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_no":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_spec":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "sku_unit":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_meature_mode":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_ratio":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_is_accurate":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_remark":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    },
                    "cn_word":{
                        "type":"text",
                        "analyzer":"ik_smart",
                        "search_analyzer":"ik_smart"
                    },
                    "cn_word_max":{
                        "type":"text",
                        "analyzer":"ik_max_word",
                        "search_analyzer":"ik_max_word"
                    },
                    "first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_smart_analyze",
                        "search_analyzer":"single_letter_analyze"
                    },
                    "full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_smart_analyze",
                        "search_analyzer":"full_pinyin_smart_analyze"
                    },
                    "raw_first_letter":{
                        "type":"text",
                        "analyzer":"first_letter_keyword_analyze",
                        "search_analyzer":"first_letter_keyword_analyze"
                    },
                    "raw_full_pinyin":{
                        "type":"text",
                        "analyzer":"full_pinyin_keyword_analyze",
                        "search_analyzer":"full_pinyin_keyword_analyze"
                    }
                }
            },
            "sku_pics":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_barcode":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_status":{
                "type":"integer",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_c_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_u_u":{
                "type":"text",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_c_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "sku_u_t":{
                "type":"long",
                "fields":{
                    "raw":{
                        "type":"keyword"
                    }
                }
            },
            "cust_order":{
                "type":"nested",
                "properties":{
                    "cust_id":{
                        "type":"integer",
                        "fields":{
                            "raw":{
                                "type":"keyword"
                            }
                        }
                    },
                    "qty":{
                        "type":"integer",
                        "fields":{
                            "raw":{
                                "type":"keyword"
                            }
                        }
                    }
                }
            },
            "cust_alias":{
                "type":"nested",
                "properties":{
                    "cust_id":{
                        "type":"integer",
                        "fields":{
                            "raw":{
                                "type":"keyword"
                            }
                        }
                    },
                    "alias":{
                        "type":"text",
                        "fields":{
                            "raw":{
                                "type":"keyword"
                            },
                            "cn_word":{
                                "type":"text",
                                "analyzer":"ik_smart",
                                "search_analyzer":"ik_smart"
                            },
                            "cn_word_max":{
                                "type":"text",
                                "analyzer":"ik_max_word",
                                "search_analyzer":"ik_max_word"
                            },
                            "first_letter":{
                                "type":"text",
                                "analyzer":"first_letter_smart_analyze",
                                "search_analyzer":"single_letter_analyze"
                            },
                            "full_pinyin":{
                                "type":"text",
                                "analyzer":"full_pinyin_smart_analyze",
                                "search_analyzer":"full_pinyin_smart_analyze"
                            },
                            "raw_first_letter":{
                                "type":"text",
                                "analyzer":"first_letter_keyword_analyze",
                                "search_analyzer":"first_letter_keyword_analyze"
                            },
                            "raw_full_pinyin":{
                                "type":"text",
                                "analyzer":"full_pinyin_keyword_analyze",
                                "search_analyzer":"full_pinyin_keyword_analyze"
                            }
                        }
                    }
                }
            }
        }
    }
}
```

```shell

while true ;do sleep 1 && echo "----" && kubectl -n dev get pod -o wide|grep elasticsearch-; done;
```

调整副本数量
```shell
PUT /my_temp_index/_settings
{
    "number_of_replicas": 1
}
```

# 参考文档

https://github.com/elasticsearch-dump/elasticsearch-dump